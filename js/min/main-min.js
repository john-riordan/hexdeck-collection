function Card(a){this.init(a)}function randomIntFromInterval(a,t){return Math.floor(Math.random()*(t-a+1)+a)}var summonerData={},requestData={},w=window.innerWidth,h=window.innerHeight,wInner=w-260,hInner=h-370;$(".click-try").on("click",function(){$('input[name="summonerName"]').val($(".try-value").text()),$("#summonerForm").submit()}),$('input[name="summonerName"]').keyup(function(){$(this).val().length>2?$(".summoner-submit-frame").addClass("show"):$(".summoner-submit-frame").removeClass("show")}),$("#summonerForm").submit(function(a){$("body").addClass("cards-loading"),a.preventDefault(),userSummonerRegion=$("select[name=summonerRegion]").val(),userSummonerName=$("input[name=summonerName]").val(),userSummonerRole=$("select[name=summonerPosition]").val(),summonerData={summonerRegion:userSummonerRegion,summonerName:userSummonerName,summonerRole:userSummonerRole},$.ajax({type:"POST",url:"getData.php",data:summonerData,dataType:"json",encode:!0}).done(function(a){$("body").removeClass("cards-loading"),$("body").addClass("cards-loaded"),requestData=a,console.log(requestData);var t=0,e=0,s=0;requestData.masteryDeck.gold&&(t=requestData.masteryDeck.gold.length),requestData.masteryDeck.standard&&(e=requestData.masteryDeck.standard.length),s=t+e;var r=0,i=0;$.each(requestData.masteryDeck.gold,function(a,t){var e=t.info.attack,d=t.info.magic,o=t.info.defense;i=s-r,$(".cards").append('              <div class="card card-gold" data-cdiff="'+t.info.difficulty+'" style="z-index: '+i+'">                <div class="card-wrap card-image">                  <div class="card-main">                    <div class="card-main-gold">                      <div class="card-main-wrap">                        <div class="card-text">                          <div class="card-name text-gradient" data-text="'+t.text.championName+'">'+t.text.championName+'</div>                          <div class="card-title">'+t.text.championTitle+'</div>                          <div class="card-blurb" title="'+t.text.blurb+'">'+t.text.blurb+'</div>                        </div>                        <div class="card-artwork" style="background-image: url(img/champions/'+t.championKey+'_Splash_Centered_0.jpg);"></div>                      </div>                    </div>                  </div>                  <div class="card-stats">                    <div class="stats-left">                      '+(e>0?'<div class="stat stat-ad" title="Attack Damage Value"><div class="stat-value text-gradient">'+e+"</div></div>":"")+"                      "+(d>0?'<div class="stat stat-ap" title="Ability Power Value"><div class="stat-value text-gradient">'+d+"</div></div>":"")+'                    </div>                    <div class="stats-right">                      '+(o>0?'<div class="stat stat-def" title="Defense Value"><div class="stat-value text-gradient">'+o+"</div></div>":"")+'                    </div>                  </div>                  <div class="card-difficulty" title="Cost/Difficulty Value">                    <div class="card-difficulty-frame">                      <div class="difficulty-value">'+t.info.difficulty+'</div>                    </div>                  </div>                  <div class="card-mastery">                    <div class="mastery-icon mastery-5"></div>                    <div class="mastery-ribbon"></div>                  </div>                  <svg class="card-outer-frame" x="0px" y="0px" viewBox="0 0 270 380" style="enable-background:new 0 0 270 380;">                  	<path d="M230.9,1c0.5,20.8,17.3,37.6,38.1,38.1v302.3c-20.8,0.5-37.6,17.3-38.1,38.1H39.1c-0.5-20.8-17.3-37.6-38.1-38.1V39.1 C21.8,38.6,38.6,21.8,39.1,1H230.9 M231.9,0H38.1c0,21.1-17.1,38.1-38.1,38.1v304.3c21.1,0,38.1,17.1,38.1,38.1h193.8 c0-21.1,17.1-38.1,38.1-38.1V38.1C248.9,38.1,231.9,21.1,231.9,0L231.9,0z"/>                  </svg>                </div>              </div>            '),r++}),$.each(requestData.masteryDeck.standard,function(a,t){var e=t.info.attack,d=t.info.magic,o=t.info.defense;i=s-r,$(".cards").append('              <div class="card card-standard" data-cdiff="'+t.info.difficulty+'" style="z-index: '+i+'">                <div class="card-wrap card-image">                  <div class="card-main">                    <div class="card-main-wrap">                      <div class="card-text">                        <div class="card-name text-gradient" data-text="'+t.text.championName+'">'+t.text.championName+'</div>                        <div class="card-title">'+t.text.championTitle+'</div>                        <div class="card-blurb" title="'+t.text.blurb+'">'+t.text.blurb+'</div>                      </div>                      <div class="card-artwork" style="background-image: url(img/champions/'+t.championKey+'_Splash_Centered_0.jpg);"></div>                    </div>                  </div>                  <div class="card-stats">                    <div class="stats-left">                      '+(e>0?'<div class="stat stat-ad" title="Attack Damage Value"><div class="stat-value text-gradient">'+e+"</div></div>":"")+"                      "+(d>0?'<div class="stat stat-ap" title="Ability Power Value"><div class="stat-value text-gradient">'+d+"</div></div>":"")+'                    </div>                    <div class="stats-right">                      '+(o>0?'<div class="stat stat-def" title="Defense Value"><div class="stat-value text-gradient">'+o+"</div></div>":"")+'                    </div>                  </div>                  <div class="card-difficulty" title="Cost/Difficulty Value">                    <div class="card-difficulty-frame">                      <div class="difficulty-value">'+t.info.difficulty+'</div>                    </div>                  </div>                  <div class="card-mastery">                    <div class="mastery-icon mastery-4"></div>                    <div class="mastery-ribbon"></div>                  </div>                  <svg class="card-outer-frame" x="0px" y="0px" viewBox="0 0 270 380" style="enable-background:new 0 0 270 380;">                  	<path d="M230.9,1c0.5,20.8,17.3,37.6,38.1,38.1v302.3c-20.8,0.5-37.6,17.3-38.1,38.1H39.1c-0.5-20.8-17.3-37.6-38.1-38.1V39.1 C21.8,38.6,38.6,21.8,39.1,1H230.9 M231.9,0H38.1c0,21.1-17.1,38.1-38.1,38.1v304.3c21.1,0,38.1,17.1,38.1,38.1h193.8 c0-21.1,17.1-38.1,38.1-38.1V38.1C248.9,38.1,231.9,21.1,231.9,0L231.9,0z"/>                  </svg>                </div>              </div>            '),r++}),Deck.init(),0==r&&$(".cards").append('<div class="no-cards"></div>'),$(".count-all .value").text(r),$(".count-rares .value").text(t),$("#icon").attr("src","http://ddragon.leagueoflegends.com/cdn/"+requestData.version+"/img/profileicon/"+requestData.summonerInfo.summonerIcon+".png"),$(".summoner-name").text(requestData.summonerInfo.summonerNameFull)})});var cardCount,grabCount=0;Card.prototype.audioload=function(a){a.audioloaded++,2==a.audioloaded&&(document.body.classList.add("loaded"),a.majesty.play(),a.whoosh.play(),a.bindevents(),a.loop(a))},Card.prototype.bindevents=function(){var a=this;this.card.addEventListener("mousedown",function(t){a.onmousedown(a,t)})},Card.prototype.onmousedown=function(a,t){grabCount++,a.card.style["z-index"]=cardCount+grabCount,a.md=!0,a.mx=t.pageX,a.my=t.pageY,a.pinx=a.cardw/2,a.piny=a.cardh/2,a.pinxperc=100-a.pinx/a.cardw*100,a.pinyperc=100-a.piny/a.cardh*100},Card.prototype.onmouseup=function(){this.md=!1},Card.prototype.onmousemove=function(a){this.md&&(this.mx=a.pageX,this.my=a.pageY)},Card.prototype.onresize=function(){this.ww=window.innerWidth,this.wh=window.innerHeight},Card.prototype.loop=function(a){requestAnimationFrame(function(){a.loop(a)}),a.targetx=a.mx-a.cardx-a.pinx,a.targety=a.my-a.cardy-a.piny,a.cardx+=.25*a.targetx,a.cardy+=.25*a.targety,a.cardx<-a.cardw/2&&(a.cardx=-a.cardw/2),a.cardx>a.ww-a.cardw/2&&(a.cardx=a.ww-a.cardw/2),a.cardy<-a.cardh/2&&(a.cardy=-a.cardh/2),a.cardy>a.wh-a.cardh/2&&(a.cardy=a.wh-a.cardh/2),a.targetrx=3*(a.ocardy-a.cardy-a.rx),a.targetry=3*(a.cardx-a.ocardx-a.ry),a.targetrx=Math.min(a.targetrx,90),a.targetrx=Math.max(a.targetrx,-90),a.targetry=Math.min(a.targetry,90),a.targetry=Math.max(a.targetry,-90),a.rx+=.1*a.targetrx,a.ry+=.1*a.targetry,a.targetscale=a.md?1.2-a.scale:1-a.scale,a.scale+=.2*a.targetscale,a.card.style.transform="translate3d("+a.cardx+"px, "+a.cardy+"px, 0) rotate("+a.rot+"deg)",a.image.style["transform-origin"]=a.pinxperc+"% "+a.pinyperc+"%",a.image.style.transform="scale("+a.scale+") rotateY("+a.ry+"deg) rotateX("+a.rx+"deg)",a.majestyvoltarget=(a.md,0),a.majestyvol+=.1*(a.majestyvoltarget-a.majestyvol),a.majesty.volume=a.majestyvol,a.whooshvoltarget=.001*(Math.abs(a.ocardy-a.cardy)+Math.abs(a.ocardx-a.cardx)),a.whooshvol+=.1*(a.whooshvoltarget-a.whooshvol),a.whoosh.volume=Math.min(a.whooshvol,.1),a.ocardx=a.cardx,a.ocardy=a.cardy},Card.prototype.init=function(a){var t=this;this.onresize(),this.card=a,this.image=this.card.querySelector(".card-wrap"),this.cardw=260,this.cardh=370,this.cardx=randomIntFromInterval(350,wInner),this.cardy=randomIntFromInterval(0,hInner),this.rot=randomIntFromInterval(-13,13),this.ocardx=this.cardx,this.ocardy=this.cardy,this.pinx=0,this.piny=0,this.pinxperc=0,this.pinyperc=0,this.targetx=this.cardx,this.targety=this.cardy,this.rx=0,this.ry=0,this.targetrx=0,this.targetry=0,this.scale=1,this.targetscale=this.scale,this.md=!1,this.mx=this.cardx,this.my=this.cardy,this.audioloaded=0,this.whooshvol=0,this.whooshvoltarget=0,this.whoosh=new Audio,this.whoosh.addEventListener("canplaythrough",function(){t.audioload(t)}),this.whoosh.src="../img/sound-whoosh.ogg",this.whoosh.volume=0,this.whoosh.loop=!0,this.majestyvol=0,this.majestyvoltarget=0,this.majesty=new Audio,this.majesty.addEventListener("canplaythrough",function(){t.audioload(t)}),this.majesty.src="../img/sound-sprinkle.ogg",this.majesty.volume=0,this.majesty.loop=!0};var Deck={cardObjects:[],init:function(){if(cards=[].slice.call(document.querySelectorAll(".card")),cardCount=cards.length,Array.isArray(cards)){for(var a=0,t=cards.length;t>a;a++){var e=new Card(cards[a]);this.cardObjects.push(e)}window.addEventListener("mouseup",Deck.onmouseup),window.addEventListener("mousemove",Deck.onmousemove),window.addEventListener("resize",Deck.onresize)}},onresize:function(){for(var a=0,t=Deck.cardObjects.length;t>a;a++)Deck.cardObjects[a].onresize()},onmouseup:function(){for(var a=0,t=Deck.cardObjects.length;t>a;a++)Deck.cardObjects[a].onmouseup()},onmousemove:function(a){for(var t=0,e=Deck.cardObjects.length;e>t;t++)Deck.cardObjects[t].onmousemove(a)}};